# 任務列表頁面布局設計

## 設計目標

根據用戶反饋，設計一個**簡潔、緊湊、美觀、實用**的任務列表頁面布局，重點解決以下問題：

1. **避免篩選項目換行** - 所有篩選項目應在一行內顯示，充分利用空間
2. **減少空白區域** - 移除不必要的空白和獨立區塊
3. **優化統計摘要位置** - 統計摘要應緊湊顯示，不佔用過多空間
4. **整合操作按鈕** - 刷新、批量分配等按鈕應合理放置，不分散
5. **優化客戶選擇區域** - 全選客戶、一鍵展開/收合應與篩選區域整合

## 整體布局結構

```
┌─────────────────────────────────────────────────────────────────────────┐
│  FilterCard (白色卡片，無標題，緊湊內邊距)                                │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │ 第一行（分為兩個子行，無視覺分隔）                                  │ │
│  │                                                                     │ │
│  │  子行1: [搜尋框] [開始月份] [結束月份] [負責人] [標籤] [狀態] [到期狀態] [隱藏已完成✓] │ │
│  │  子行2: [服務類型] [標籤多選] [是否可開始] [我的任務] [刷新] [批量分配]              │ │
│  │                                                                     │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │ 第二行：客戶選擇控制 + 統計摘要 (連續排列，無分隔線)                  │ │
│  │  [全選客戶] [一鍵展開] [33總任務] [33進行中] [0已完成] [14逾期] [33可開始] │ │
│  └───────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│  任務列表區域 (直接顯示，無額外卡片)                                      │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │ 客戶分組                                                           │ │
│  │  ┌─ 客戶A (2個任務)                                               │ │
│  │  │  ┌─ 服務1 (1個任務)                                            │ │
│  │  │  │  └─ 任務項目...                                            │ │
│  └───────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

## 詳細布局規格

### 1. FilterCard 容器

**樣式規格：**
- `padding`: `8px 16px` (上下 8px，左右 16px)
- `margin-bottom`: `16px`
- 無標題，無額外邊框
- 背景色：白色
- 圓角：`var(--radius-base)`
- 陰影：`var(--shadow-card)`

### 2. 第一行：主要篩選區域（分為兩個子行）

**布局方式：** Flexbox，分為兩個子行，無視覺分隔

**第一子行** (`.filter-row-main-first`):
- `display`: `flex`
- `flex-wrap`: `nowrap` (強制不換行)
- `gap`: `6px` (項目間距)
- `align-items`: `center`
- `width`: `100%`
- **重點：確保搜索欄及篩選框內文字可以完整顯示**

**第二子行** (`.filter-row-main-second`):
- `display`: `flex`
- `flex-wrap`: `nowrap` (強制不換行)
- `gap`: `6px` (項目間距)
- `align-items`: `center`
- `width`: `100%`
- `margin-top`: `6px` (與第一子行的間距)

**第一子行項目（基本篩選）：**
- 搜尋框：`flex: 1 1 auto`, `min-width: 140px`, `max-width: 200px` (確保文字完整顯示)
- 開始/結束月份：`flex: 0 0 110px`, `min-width: 110px`, `max-width: 110px` (確保日期完整顯示)
- 負責人：`flex: 0 0 120px`, `min-width: 120px`, `max-width: 120px` (確保人名完整顯示)
- 標籤：`flex: 0 0 120px`, `min-width: 120px`, `max-width: 120px`
- 狀態：`flex: 0 0 110px`, `min-width: 110px`, `max-width: 110px`
- 到期狀態：`flex: 0 0 130px`, `min-width: 130px`, `max-width: 130px` (確保「即將到期」文字完整)
- 隱藏已完成：`flex: 0 0 auto` (根據內容，確保文字完整)

**第二子行項目（高級篩選 + 操作按鈕）：**
- 服務類型：`min-width: 140px`, `flex-shrink: 1` (確保選項文字完整顯示)
- 標籤多選：`min-width: 140px`, `flex-shrink: 1`
- 是否可開始：`min-width: 120px`, `flex-shrink: 1` (確保選項文字完整)
- 我的任務：`flex: 0 0 auto`
- 刷新按鈕：`flex: 0 0 auto`
- 批量分配按鈕：`flex: 0 0 auto` (僅在有選中任務時顯示)

### 3. 第二行：客戶選擇控制 + 統計摘要

**布局方式：** Flexbox，單行，連續排列（無分隔線）

**樣式規格：**
- `display`: `flex`
- `align-items`: `center`
- `gap`: `8px` (所有項目連續排列，統一間距)
- `padding-top`: `6px`
- `margin-top`: `6px`
- `border-top`: `1px solid #f0f0f0` (細分隔線，與第一行分隔)
- `flex-wrap`: `nowrap`
- `justify-content`: `flex-start` (從左開始連續排列)

**控制項目（左側）：**
- 全選客戶 checkbox
- 一鍵展開/收合按鈕
- 按鈕樣式：`height: 28px`, `padding: 0 12px`, 有邊框和陰影

**統計摘要（右側，連續排列）：**
- 緊接在客戶選擇控制後面，無分隔線
- 顯示為緊湊的一行形式，無框設計
- 統計項目之間用分隔線 `|` 分隔
- 每個統計項目可點擊，觸發對應篩選
- `height`: `28px`
- 字體大小：`12px`

### 4. 響應式設計

**重點：確保搜索欄及篩選框內文字可以完整顯示，優先於響應式換行**

**≥1600px (大螢幕):**
- 第一行的兩個子行都單行顯示，不換行
- 所有篩選項目文字完整顯示
- 第二行連續排列，統計摘要完整顯示

**1400px - 1600px:**
- 第一行的兩個子行仍單行顯示
- 適當調整項目寬度，但確保文字完整顯示
- 優先保證文字可見性，而非強制單行

**1200px - 1400px:**
- 如果項目寬度不足導致文字被截斷，允許子行內換行
- `flex-wrap`: `wrap` (僅在必要時)
- 第二行保持連續排列

**<1200px (小螢幕):**
- 允許多行顯示，確保文字完整
- 第二行統計摘要可換行
- 優先保證文字完整顯示和可讀性

## 具體元素規格

### 統計摘要設計

**布局：** 一行緊湊顯示，無框

```
[📄 33 總任務] | [🔄 33 進行中] | [✓ 0 已完成] | [⚠ 14 逾期] | [▶ 33 可開始]
```

**樣式：**
- 每個統計項目：`padding: 0 8px`, `height: 28px`, `line-height: 28px`
- 圖標 + 數字 + 標籤，水平排列
- 分隔線：`width: 1px`, `height: 16px`, `background: #e8e8e8`, `margin: 0 4px`
- 可點擊，hover 時背景色變化
- 字體大小：`12px`
- 數字加粗

### 篩選項目統一規格

**所有輸入框/選擇框：**
- `size`: `small`
- `height`: `28px`
- 統一的 border-radius 和 border 顏色
- 統一的圖標樣式

**間距規則：**
- 主要篩選項目之間：`6px`
- 高級篩選項目之間：`4px`
- 操作按鈕之間：`4px`
- 行與行之間：`6px`

### 空白區域優化

**移除的空白：**
1. FilterCard 的上下內邊距減少到 `8px`
2. 移除統計摘要的獨立卡片
3. 移除客戶選擇控制的獨立區塊邊框
4. 移除不必要的 margin 和 padding

**保留的最小間距：**
- 項目之間最小間距：`4px`
- 行與行之間：`6px`
- 卡片與內容之間：`8px 16px`

## 實現要點

### CSS 關鍵樣式

```css
/* 第一行容器 - 包含兩個子行 */
.filter-row-main {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* 第一子行：基本篩選項目 */
.filter-row-main-first {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: nowrap;
  width: 100%;
}

/* 第二子行：高級篩選 + 操作按鈕 */
.filter-row-main-second {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: nowrap;
  width: 100%;
  margin-top: 6px;
}

/* 確保搜索欄及篩選框內文字完整顯示 */
.filter-item input,
.filter-item .ant-select-selector {
  min-width: fit-content !important;
  white-space: nowrap;
  overflow: visible;
}

/* 第二行：客戶選擇控制 + 統計摘要 */
.filter-row-toolbar {
  display: flex;
  align-items: center;
  gap: 8px; /* 連續排列，統一間距 */
  padding-top: 6px;
  margin-top: 6px;
  border-top: 1px solid #f0f0f0;
  flex-wrap: nowrap;
  justify-content: flex-start; /* 從左開始連續排列 */
}

/* 統計摘要 - 連續排列在第二行 */
.stats-wrapper-inline {
  flex: 0 0 auto;
  height: 28px;
  margin-left: 0; /* 無額外左邊距，連續排列 */
}
```

### 響應式斷點

**重點：優先保證文字完整顯示，而非強制單行**

```css
/* ≥1600px: 兩個子行都單行，確保文字完整 */
@media (min-width: 1600px) {
  .filter-row-main-first,
  .filter-row-main-second {
    flex-wrap: nowrap;
  }
  /* 確保所有項目有足夠寬度顯示文字 */
  .search-item { min-width: 140px; }
  .date-item { min-width: 110px; }
  .select-item { min-width: 120px; }
}

/* 1400px-1600px: 仍嘗試單行，但優先保證文字完整 */
@media (max-width: 1600px) and (min-width: 1400px) {
  .filter-row-main-first,
  .filter-row-main-second {
    flex-wrap: nowrap;
  }
  /* 適當調整，但確保最小寬度足夠顯示文字 */
  .search-item { min-width: 120px; }
  .date-item { min-width: 100px; }
  .select-item { min-width: 110px; }
}

/* 1200px-1400px: 允許換行以保證文字完整 */
@media (max-width: 1400px) and (min-width: 1200px) {
  .filter-row-main-first,
  .filter-row-main-second {
    flex-wrap: wrap; /* 允許換行以確保文字完整 */
  }
}

/* <1200px: 多行布局，優先保證文字完整 */
@media (max-width: 1200px) {
  .filter-row-main-first,
  .filter-row-main-second {
    flex-wrap: wrap;
  }
  .filter-row-toolbar {
    flex-wrap: wrap; /* 第二行也可換行 */
  }
}
```

## 驗收標準

### 視覺驗收

- [ ] **搜索欄及篩選框內文字可以完整顯示，不被截斷**
- [ ] 第一行分為兩個子行，無視覺分隔（僅靠間距自然分隔）
- [ ] 第二行客戶選擇控制與統計摘要連續排列，無分隔線
- [ ] 統計摘要緊湊顯示，無多餘空白
- [ ] 整體布局緊湊，無明顯空白區域
- [ ] 所有元素對齊整齊，間距一致

### 功能驗收

- [ ] 點擊統計摘要可觸發對應篩選
- [ ] 刷新按鈕正常工作
- [ ] 批量分配按鈕在有選中任務時顯示
- [ ] 全選客戶和一鍵展開/收合功能正常
- [ ] 所有篩選項目響應式縮放正常

### 響應式驗收

- [ ] ≥1600px: 兩個子行都單行，所有文字完整顯示
- [ ] 1400px-1600px: 仍嘗試單行，但優先保證文字完整
- [ ] 1200px-1400px: 允許換行以保證文字完整顯示
- [ ] <1200px: 多行布局，優先保證文字完整和可讀性
- [ ] **所有響應式斷點下，搜索欄及篩選框內文字都能完整顯示**

## 與現有設計的差異

### 主要改進點

1. **移除任務總覽 Tab** - 已合併為單一任務列表頁面
2. **統計摘要整合** - 從獨立區塊改為緊湊的一行顯示，放在右側
3. **篩選項目緊湊** - 減少間距，優化項目寬度，避免換行
4. **客戶選擇整合** - 從獨立區塊改為與篩選區域整合的第二行
5. **減少空白** - 減少所有不必要的 padding 和 margin
6. **響應式優化** - 明確的斷點設計，確保在不同螢幕尺寸下都有良好體驗

## 審批要求

請審批以下關鍵設計決策：

1. **第一行分為兩個子行** - 基本篩選項目在第一子行，高級篩選+操作按鈕在第二子行，無視覺分隔
2. **統計摘要位置** - 移到第二行，與客戶選擇控制連續排列，無分隔線
3. **文字完整顯示優先** - 確保搜索欄及篩選框內文字可以完整顯示，優先於強制單行
4. **連續排列** - 第二行所有項目（客戶選擇控制+統計摘要）連續排列，統一間距
5. **響應式策略** - 優先保證文字完整顯示，必要時允許換行

## 確認事項

根據用戶確認：
- ✅ 第一行的兩個子行**不需要視覺分隔**
- ✅ 第二行項目**連續排列**（justify-content: flex-start, gap: 8px）
- ✅ 統計摘要與客戶選擇控制之間**不需要分隔線**
- ✅ 響應式設計**無須理會**（重點是保證文字完整顯示）

**審批通過後，將按照此設計文件進行實現。**

