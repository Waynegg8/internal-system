# Implementation Log: Task 1.1.2.1

**Summary:** 實現可開始篩選參數：在 handleGetTasks 中添加 can_start 篩選支持，支援篩選「可開始」或「不可開始」的任務。使用與 SELECT 子句相同的 CASE 邏輯在 WHERE 條件中進行篩選，並更新 cacheKey 以包含 can_start 參數

**Timestamp:** 2025-11-19T14:25:31.558Z
**Log ID:** 5ec6a8f9-eabe-47dc-b31e-21cb56c39b4e

---

## Statistics

- **Lines Added:** +35
- **Lines Removed:** -2
- **Files Changed:** 1
- **Net Change:** 33

## Files Modified
- backend/src/handlers/tasks/task-crud.js

## Files Created
_No files created_

---

## Artifacts

### API Endpoints

#### GET /api/v2/tasks
- **Purpose:** 獲取任務列表，支援 can_start 篩選參數（true/false）
- **Location:** backend/src/handlers/tasks/task-crud.js:106
- **Request Format:** Query params: page, perPage, q, status, due, serviceYear, serviceMonth, hideCompleted, can_start (true/false)
- **Response Format:** { list: Task[], meta: { page, perPage, total, hasNext } }

### Functions

#### handleGetTasks
- **Purpose:** 獲取任務列表，支援 can_start 篩選參數
- **Location:** backend/src/handlers/tasks/task-crud.js:106
- **Signature:** (request, env, ctx, requestId, url) => Promise<Response>
- **Exported:** Yes

### Integrations

#### Integration
- **Description:** 前端可以通過 can_start=true 或 can_start=false 參數篩選可開始或不可開始的任務
- **Frontend Component:** TaskFilters, TasksList
- **Backend Endpoint:** GET /api/v2/tasks?can_start=true
- **Data Flow:** 前端發送篩選請求（含 can_start 參數） → API 在 WHERE 條件中應用 can_start 篩選邏輯 → 返回篩選後的任務列表

