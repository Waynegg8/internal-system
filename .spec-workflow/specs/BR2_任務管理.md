# BR2: 任務管理

**User Story**: 作為會計師事務所的員工，我需要管理各類工作任務，以便能夠追蹤任務進度、確保任務及時完成，並減少重複性工作。

**業務價值**:
- 提升任務執行效率，確保任務及時完成
- 追蹤任務進度，及時發現問題
- 自動化任務生成，減少重複性工作

---

## 功能需求
- BR2.1: 任務基本資訊管理 ✅ 已實現
- BR2.2: 任務狀態管理 ✅ 已實現
- BR2.3: 任務模板管理 ✅ 已實現
- BR2.4: 任務自動生成 ✅ 已實現
- BR2.5: 任務文件管理 ✅ 已實現
- BR2.6: 任務 SOP 關聯 ✅ 已實現
- BR2.7: 任務歷史記錄 ✅ 已實現

---

## 驗收標準
- WHEN 員工創建任務時 THEN 系統 SHALL 記錄任務標題、描述、負責人、到期日等資訊
- WHEN 任務到期時 THEN 系統 SHALL 提醒負責人
- WHEN 員工完成任務時 THEN 系統 SHALL 更新任務狀態並記錄完成時間
- WHEN 系統自動生成任務時 THEN 系統 SHALL 基於任務配置和執行頻率自動創建任務
- WHEN 員工查看任務時 THEN 系統 SHALL 顯示任務的所有階段、關聯文件、SOP 等資訊

---

## 業務規則
- 任務可以包含多個階段，階段按順序執行
- 任務可以關聯標準作業程序（SOP），任務生成時自動複製 SOP
- **任務執行頻率從服務層級繼承**（見 BR1.3.2）:
  - 任務不再需要單獨設定執行頻率
  - 任務的執行頻率從服務層級的 `execution_months` 繼承
  - 系統根據服務的 `execution_months` 和 `use_for_auto_generate` 自動生成任務
  - 只有 `use_for_auto_generate = 1` 的服務才會自動生成任務
- 任務到期日可以設定為當月最後一天、指定日期、或從月初起算天數
- 任務可以設定提前天數，系統在到期日前自動生成任務


