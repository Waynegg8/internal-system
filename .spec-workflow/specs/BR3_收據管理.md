# BR3: 收據管理（Receipts）

**定位/目的**: 管理收據的建立、查詢、付款與狀態流轉，支援依月份/客戶/服務對帳。

**路由**
- 列表：`/finance/receipts`
- 詳情/編輯：`/finance/receipts/:id`

---

## 功能需求
- 建立收據：關聯 `client_id`、`service`（或收費計劃明細）、金額、開立日、備註
- 編輯/作廢收據：更新欄位、作廢（狀態變更與記錄）
- 付款紀錄：新增多筆付款、顯示累計、校驗不得超過收據金額
- 查詢/篩選：依月份、年度、客戶、服務、狀態搜尋
- 對帳提示：依任務完成度、收費計劃是否存在與建議金額之差異提示

---

## 驗收標準
- WHEN 員工創建收據時 THEN 系統 SHALL 關聯客戶服務並記錄收據金額
- WHEN 客戶付款時 THEN 系統 SHALL 記錄付款資訊並更新收據狀態
- WHEN 員工查看收據時 THEN 系統 SHALL 顯示關聯客戶、服務、月份、金額、付款明細與狀態
- WHEN 系統檢查月份任務全數完成且未開立收據 THEN 系統 SHALL 提示應開立收據與建議金額

---

## 業務規則
- 收據必須關聯客戶服務
- 狀態：草稿、已開立、已付款、已取消（作廢）
- 支援多次付款，付款總額不得超過收據金額
- 對帳來源：收費計劃（定期 + 一次性）與任務完成度


