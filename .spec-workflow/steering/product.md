# Product Overview

## Product Purpose

本系統是專為會計師事務所設計的內部管理系統，旨在解決客戶管理、任務追蹤、財務管理、人力資源等核心業務需求。系統提供完整的客戶資訊管理、任務自動化生成與追蹤、收據與帳務管理、薪資計算與管理、工時記錄、成本分析、報表統計等功能，幫助事務所提升管理效率、確保數據準確性、支援審計追蹤，並提升整體工作效率。

## Target Users

### 管理員
- **需求**：全公司數據查看、薪資結算、報表分析、系統設定
- **痛點**：缺乏統一的數據視圖、薪資計算複雜且容易出錯、無法快速了解公司經營狀況
- **使用場景**：
  - 查看全公司所有員工的任務、工時、財務統計
  - 執行每月薪資結算，查看詳細計算明細
  - 查看月度與年度報表，分析客戶獲利與員工績效
  - 管理系統設定（服務項目、模板、用戶、公司資料等）

### 員工
- **需求**：個人任務管理、工時填報、假期申請、客戶管理
- **痛點**：任務追蹤困難、工時記錄繁瑣、缺乏統一的客戶資訊管理
- **使用場景**：
  - 查看和處理分配的任務，追蹤任務進度
  - 填寫每日工時記錄，關聯客戶與任務
  - 申請假期，查看假期餘額
  - 管理客戶資訊，新增和編輯客戶資料
  - 查看 SOP 和 FAQ，獲取作業指引

## Key Features

系統包含 16 個主要業務模組，涵蓋事務所運營的各個方面：

1. **客戶管理（BR1）**：客戶列表、新增客戶（基本資訊、服務設定、帳務設定）、客戶詳情管理，支援客戶標籤、批量移轉負責人、軟刪除與恢復
2. **任務管理（BR2）**：任務列表與篩選、任務詳情、任務創建與配置、任務模板管理、自動生成任務、任務通知系統
3. **收據管理（BR3）**：收據列表與篩選、收據詳情、收據建立（從對帳提醒或手動建立）、收據付款記錄、收據對帳
4. **薪資管理（BR4）**：每月薪資結算、員工底薪與加給設定、績效獎金與年終獎金、薪資系統設定、打卡記錄
5. **成本管理（BR5）**：成本項目類型管理、月度管理費用記錄、成本模板、成本分攤、員工成本分析、客戶成本分析
6. **工時管理（BR6）**：工時填報、工時驗證、工時顯示、工時管理，支援多種工時類型（正常工時、各種加班類型）
7. **假期管理（BR7）**：假期申請、餘額管理、生活事件登記、補休 FIFO 管理、與薪資系統整合
8. **外出管理（BR8）**：外出記錄列表、外出記錄建立，自動計算交通補貼
9. **SOP 管理（BR9）**：SOP 建立與編輯、服務層級與任務層級 SOP、自動綁定到任務、版本管理
10. **FAQ 管理（BR10）**：FAQ 列表、FAQ 詳情、FAQ 創建、FAQ 編輯，支援服務類型與層級篩選
11. **資源管理（BR11）**：資源列表、資源上傳、資源預覽、資源管理，支援服務層級與任務層級資源
12. **附件管理（BR12）**：附件上傳、附件列表、附件預覽、附件下載與刪除，支援多種文件類型
13. **月度報表（BR13）**：月度收款報表、月度薪資報表、月度員工產值分析、月度客戶毛利分析
14. **年度報表（BR14）**：年度收款報表、年度薪資報表、年度員工產值分析、年度客戶毛利分析
15. **儀表板（BR15）**：管理員儀表板（全公司統計）、員工儀表板（個人統計）、今日摘要、即時提醒
16. **系統設定（BR16）**：服務設定、模板設定、用戶管理、公司設定、自動化規則、假期設定

## Business Objectives

1. **提升管理效率**：集中管理所有業務數據，提供統一的查看和管理界面，減少重複工作
2. **確保數據準確性**：自動化計算（薪資、成本分攤、收入分配等），減少人為錯誤，確保財務數據準確
3. **支援審計追蹤**：完整的數據變更記錄、軟刪除機制、版本管理，支援審計需求
4. **提升工作效率**：任務自動生成、SOP 自動綁定、批量操作、複製功能等，減少重複配置工作
5. **數據驅動決策**：提供月度與年度報表，幫助管理層了解經營狀況、客戶獲利與員工績效
6. **知識管理**：集中管理 SOP 和 FAQ，確保作業一致性，提升知識傳遞效率

## Success Metrics

- **API 響應時間**：< 500ms（正常操作），< 2 秒（複雜計算如薪資結算）
- **頁面載入時間**：< 3 秒
- **數據準確性**：薪資計算、成本分攤、收入分配等關鍵計算 100% 準確
- **用戶滿意度**：界面簡潔直觀，操作流程清晰，錯誤提示明確
- **系統可用性**：99.9% 可用性目標
- **任務自動化率**：定期服務任務自動生成率 100%
- **數據完整性**：所有關鍵業務數據（客戶、任務、收據、薪資等）完整記錄

## Product Principles

1. **單一職責原則（Single Responsibility Principle）**：每個組件、Handler 和模組只負責一個明確的功能，確保代碼清晰易維護
2. **模組化設計（Modular Design）**：組件、工具和服務應該隔離且可重用，減少代碼重複，提升開發效率
3. **清晰的介面（Clear Interfaces）**：定義組件和層之間的清晰契約，API 端點有明確的請求/回應格式，組件通過 props 和 events 通信
4. **數據完整性（Data Integrity）**：確保所有業務數據的完整性和一致性，使用事務確保多表操作的原子性，支援軟刪除保留歷史記錄
5. **用戶體驗優先（User Experience First）**：界面簡潔直觀，操作流程清晰，提供即時反饋（載入狀態、成功/錯誤提示），支援批量操作提升效率
6. **安全性與可靠性（Security & Reliability）**：使用參數化查詢防止 SQL 注入，前端和後端雙重驗證，完整的錯誤處理機制，確保系統穩定運行
7. **性能優化（Performance Optimization）**：使用快取機制提升查詢性能，支援分頁處理大量數據，優化複雜計算邏輯

## Monitoring & Visibility

- **Dashboard Type**：Web-based 儀表板，提供管理員和員工兩種視圖
- **Real-time Updates**：每 5 分鐘自動刷新數據，頁面獲得焦點時自動刷新，整合任務通知系統提供即時提醒
- **Key Metrics Displayed**：
  - 管理員儀表板：全公司任務統計、工時統計、財務統計、即時提醒
  - 員工儀表板：個人任務統計、工時統計、相關提醒
  - 今日摘要：逾期任務、今日到期、待處理任務統計
- **Sharing Capabilities**：報表支援查看和列印（如薪資單），附件支援下載和預覽


